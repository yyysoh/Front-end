
<!--평상시엔 div, 클릭하면 input으로 동적으로 동작하게 한다
div/span 왔다 갔다 할 수도 있음
but display 속성으로 할 것
11:20~~~~~~~~~~ 완전 다시....-->


<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>DOM - 연습</title>
<style>
table {width: 500px;}
table, th, td{
	border: 1px solid black;
	border-collapse: collapse;
	padding: 5px;
	font-size: 1.2em;
}
th {width: 50%;}
th, td {
	padding: 10px;
}
td{
	background-color: orange;
}

#table1 div, #table1 input{
	width: 100%;
	font-size: 1.2em;
	padding: 2px;
	margin: 0;
}

/* TODO : input 에 대한 기본 style */
#table1 input {
	border: none; /*경계를 정의하지 않음*/
	display: none;   /* 기본적으로 안보이기 평소엔 안보임 */
	/*display:none은 화면 상 어떤 영역을 차지하지 않고 완전히 삭제된 것처럼 보이게 합니다*/
} 

</style>
</head>

<body>
<div>
<table id="table1">
	<tr>
		<th>이름</th>
		<th>아이디</th>
	</tr>
	<tr>
		<td>
			<div>홍길동</div>
			<!--todo-->
			<input type="text">
		</td>
		<td>
			<div>Mr.Hong</div>
			<!--todo-->
			<input type="text"> <!--이름 아래 텍스트 보임-->
		</td>
	</tr>
</table>
</div>

<script>
// 위 HTML 에 어떠한 inline js 코드도 삽입하지 않고 이 안에서 페이지의 모든 동작을 정의해보자

// TODO
//클릭했을 때 사라지게 하고 이걸 input으로 나타나게 함
for(e of document.querySelectorAll("#table1 div")) {
	e.addEventListener("click", function() {
		let txt = this.innerHTML.trim(); //input으로 변환해야해서 값 가져옴 홍길동, mr.hong,, innerHTML : 태그 전체를 가져오거나 바꾸는 기능
		this.style.display = 'none';
		let input = this.parentNode.getElementsByTagName("input")[0] 
		//부모인 td로 올라가 input이란 이름의 태그를 찾을 것
		input.style.display = "block"
		//홍길동이란 이름에서 바꾸고 싶어 초기화 된 상태 말고. //홍길동을 클릭하면 input이 되어야한다
		input.value = txt; //위에서 txt 해놓음. 
		//곧바로 눌렀을 때 편집 상태가 됐으면 좋겠어
		input.focus();
	
	});
};





function switchInput(e) {
	let txt = e.value.trim();
	e.style.display = 'none'; //입력한 것이 사라짐 -> div가 다시 살아나야 함
	let div = e.parentNode.getElementsByTagName('div')[0];
	div.style.display = "block";
	div.innerHTML = txt;
}



// //평상시엔 div인데 클릭하면 input이 된다
// //엔터나 밖에 클릭하면 입력이 종료되어야 한다
for(e of document.querySelectorAll("#table1 input")) {
	e.addEventListener("focusout", function() {
		switchInput(this);
	});
	e.addEventListener("keyup", function(event){ //어떤 키를 눌렀는가는 event 객체에 담겨져서 매개변수에 넣는다
		(event.keyCode == 13) && switchInput(this); //그 값은 key code에 있다
	}); //또 값 넣으면 코드가 더러우니까 위에 switch 함수 만듦
}




















// for(e of document.querySelectorAll("#table1 div")) { //홍길동, myhong 가져옴
// 	//querySelectorAll : html요소가 아닌 nodeList 형태로 값을 반환. 그러므로 사용을 하려면 반복문을 이용해 사용
// 	//querySelectorAll("요소명, 요소명")을 사용하면 서로 다른 이름의 요소를 한꺼번에 가져올 수 있습니다.
// 	e.addEventListener("click", function() {
// 		let txt = this.innerHTML.trim(); // innerHTML은 element 안의 HTML이나 XML을 가져옵니다.
// 		this.style.display = 'none'; //눈에 보이지 않는다 display 속성이 style 객체에서 사용되기 때문에 제어하려는 id명에 style.display를 붙여 속성값을 넣어줍니다.
// 		let input = this.parentNode.getElementsByTagName("input")[0];
// 		//부모, 위로 올라가서 name 찾기 td에서 input 찾기
// 		//영역을 숨길 때는 속성값에 none을 보여줄 때는 속성값에 block을 대입해줍니다.
// 		input.style.display = "block";
// 		input.value = txt;
// 		input.focus();
// 	});
// }


// function switchInput(e){
// 	let txt = e.value.trim();
// 	e.style.display = 'none';
// 	let div = e.parentNode.getElementsByTagName('div')[0];
// 	div.style.display = "block";
// 	div.innerHTML = txt;
// }

// for(e of document.querySelectorAll("#table1 input")){
// 	e.addEventListener("focusout", function(){
// 		switchInput(this);
// 	});

// 	e.addEventListener("keyup", function(event){
// 		(event.keyCode == 13) && switchInput(this);
// 	});
// }





















</script>

<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
</body>
</html>
























